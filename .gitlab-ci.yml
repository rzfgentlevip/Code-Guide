## This file is a template, and might need editing before it works on your project.
## This is a sample GitLab CI/CD configuration file that should run without any modifications.
## It demonstrates a basic 3 stage CI/CD pipeline. Instead of real tests or scripts,
## it uses echo commands to simulate the pipeline execution.
##
## A pipeline is composed of independent jobs that run scripts, grouped into stages.
## Stages run in sequential order, but jobs within stages run in parallel.
##
## For more information, see: https://docs.gitlab.com/ee/ci/yaml/#stages
##
## You can copy and paste this template into a new `.gitlab-ci.yml` file.
## You should not add this template to an existing `.gitlab-ci.yml` file by using the `include:` keyword.
##
## To contribute improvements to CI/CD templates, please follow the Development guide at:
## https://docs.gitlab.com/development/cicd/templates/
## This specific template is located at:
## https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/ci/templates/Getting-Started.gitlab-ci.yml
#image: node:24-alpine
## This folder is cached between builds
## http://docs.gitlab.com/ce/ci/yaml/README.html#cache
#cache:
#  paths:
#    - node_modules/
#stages:          # List of stages for jobs, and their order of execution
#  - deploy
#
##build-job:       # This job runs in the build stage, which runs first.
##  stage: build
##  script:
##    - npm install -g increase-memory-limit
##    - increase-memory-limit
##    - export NODE_OPTIONS=--max-old-space-size=3000 # 设置内存大小为 4GB
##    - npm install
##    #    - npm run docs:build
##    - echo "Compile complete."
#
#deploy-job:      # This job runs in the deploy stage.
#  stage: deploy  # It only runs when *both* jobs in the test stage complete successfully.
#  environment: production
#  script:
#    - export NODE_OPTIONS=--max-old-space-size=2200
#    - npm install
##    - npm run docs:build
#    - mv ./docs/.vuepress/dist public
#  pages: true


image: node:9.11.1

pages:
  cache:
    paths:
      - node_modules/

  script:
    - npm install
    - npm run docs:build
  artifacts:
    paths:
      - public
  only:
    - master